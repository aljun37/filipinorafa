<!DOCTYPE html>
<html lang="tl">
<head>
  <meta charset="UTF-8" />
  <title>Pagsusulit sa Wika</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #cce6ff;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    h2 {
      text-align: center;
    }
    .question {
      margin-bottom: 15px;
    }
    .result {
      font-weight: bold;
      margin-top: 10px;
    }
    button {
      padding: 10px 20px;
      margin-top: 10px;
    }
    select, input[type=text] {
      padding: 5px;
      font-size: 14px;
      margin-bottom: 10px;
    }
    #section-label {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Pagsusulit sa Wika</h2>
    <div id="section-label"></div>
    <div id="quiz-section"></div>
    <button id="btnCheck">Sagot</button>
    <button id="btnNext">Susunod</button>
    <div class="result" id="lblResult"></div>
  </div>

  <script>
    // === Data (3 Sections) ===
    const pamilangQuestions = [/* same as before, 20 questions */];
    const tayutayQuestions = [/* same as before, 20 questions */];
    const pangUriQuestions = [/* same as before, 20 questions */];

    // NOTE: You can paste the full data from earlier for each array

    // === Shuffle ===
    function shuffle(array){
      for(let i = array.length-1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    shuffle(pamilangQuestions);
    shuffle(tayutayQuestions);
    shuffle(pangUriQuestions);

    // === Globals ===
    let section = 1;
    let currentIndex = 0;

    let scorePamilang = 0, wrongPamilang = 0;
    let scoreTayutay = 0, wrongTayutay = 0;
    let scorePangUri = 0, wrongPangUri = 0;

    // === DOM Elements ===
    const quizDiv = document.getElementById("quiz-section");
    const lblResult = document.getElementById("lblResult");
    const btnCheck = document.getElementById("btnCheck");
    const btnNext = document.getElementById("btnNext");
    const sectionLabel = document.getElementById("section-label");

    // === Display Question ===
    function showQuestion(){
      lblResult.textContent = "";
      quizDiv.innerHTML = "";
      let q;

      if(section === 1){
        sectionLabel.textContent = "Bahagi 1: Pamilang";
        if(currentIndex >= pamilangQuestions.length){
          section = 2;
          currentIndex = 0;
          showQuestion();
          return;
        }
        q = pamilangQuestions[currentIndex];
        quizDiv.innerHTML = `
          <div class="question">${currentIndex + 1}. ${q.Text}</div>
          <input type="text" id="txtAnswer" placeholder="Isulat ang salitang pamilang" />
          <select id="cmbType">
            <option value="">--Piliin ang Uri--</option>
            <option value="Kardinal">Kardinal</option>
            <option value="Ordinal">Ordinal</option>
            <option value="Pamahagi">Pamahagi</option>
            <option value="Palansak">Palansak</option>
          </select>
        `;
      } else if(section === 2){
        sectionLabel.textContent = "Bahagi 2: Tayutay";
        if(currentIndex >= tayutayQuestions.length){
          section = 3;
          currentIndex = 0;
          showQuestion();
          return;
        }
        q = tayutayQuestions[currentIndex];
        quizDiv.innerHTML = `
          <div class="question">${currentIndex + 1}. ${q.Text}</div>
          <select id="cmbType">
            <option value="">--Piliin ang Uri--</option>
            <option value="Simili">Simili</option>
            <option value="Metapora">Metapora</option>
          </select>
        `;
      } else if(section === 3){
        sectionLabel.textContent = "Bahagi 3: Pang-uri";
        if(currentIndex >= pangUriQuestions.length){
          showFinalResult();
          return;
        }
        q = pangUriQuestions[currentIndex];
        quizDiv.innerHTML = `
          <div class="question">${currentIndex + 1}. ${q.Text}</div>
          <input type="text" id="txtAnswer" placeholder="Isulat ang salitang pang-uri (pamilang/panlarawan)" />
          <select id="cmbType">
            <option value="">--Piliin ang Uri ng Pang-uri--</option>
            <option value="Pamilang">Pamilang</option>
            <option value="Panlarawan">Panlarawan</option>
          </select>
        `;
      }
    }

    // === Check Answer ===
    function checkAnswer(){
      let q, userWord, userType;
      if(section === 1){
        q = pamilangQuestions[currentIndex];
        userWord = document.getElementById("txtAnswer").value.trim();
        userType = document.getElementById("cmbType").value;
        if(userWord.toLowerCase() === q.Word.toLowerCase() && userType === q.Type){
          lblResult.style.color = "green"; 
          lblResult.textContent = "Tama!";
          scorePamilang++;
        } else {
          lblResult.style.color = "red"; 
          lblResult.textContent = `Mali! Tamang sagot: '${q.Word}' (${q.Type})`;
          wrongPamilang++;
        }
      } else if(section === 2){
        q = tayutayQuestions[currentIndex];
        userType = document.getElementById("cmbType").value;
        if(userType === q.Answer){
          lblResult.style.color = "green"; 
          lblResult.textContent = "Tama!";
          scoreTayutay++;
        } else {
          lblResult.style.color = "red"; 
          lblResult.textContent = `Mali! Tamang sagot: ${q.Answer}`;
          wrongTayutay++;
        }
      } else if(section === 3){
        q = pangUriQuestions[currentIndex];
        userWord = document.getElementById("txtAnswer").value.trim();
        userType = document.getElementById("cmbType").value;
        if(userWord.toLowerCase() === q.Word.toLowerCase() && userType === q.Type){
          lblResult.style.color = "green"; 
          lblResult.textContent = "Tama!";
          scorePangUri++;
        } else {
          lblResult.style.color = "red"; 
          lblResult.textContent = `Mali! Tamang sagot: '${q.Word}' (${q.Type})`;
          wrongPangUri++;
        }
      }
    }

    // === Final Result ===
    function showFinalResult(){
      sectionLabel.textContent = "Tapos na ang pagsusulit!";
      let totalQ = pamilangQuestions.length + tayutayQuestions.length + pangUriQuestions.length;
      let totalScore = scorePamilang + scoreTayutay + scorePangUri;
      let perc = Math.round((totalScore / totalQ) * 100);
      let remark = (perc >= 75) ? "PASADO" : "BAGSAK";
      quizDiv.innerHTML = `
        <h3>Resulta ng Pagsusulit</h3>
        <p>Pamilang - Tama: ${scorePamilang}, Mali: ${wrongPamilang}</p>
        <p>Tayutay - Tama: ${scoreTayutay}, Mali: ${wrongTayutay}</p>
        <p>Uri ng Pang-uri - Tama: ${scorePangUri}, Mali: ${wrongPangUri}</p>
        <p>Kabuuang Score: ${totalScore} / ${totalQ} (${perc}%)</p>
        <p><strong>Remark: ${remark}</strong></p>
      `;
      btnCheck.disabled = true;
      btnNext.disabled = true;
    }

    // === Events ===
    btnNext.addEventListener("click", () => {
      currentIndex++;
      showQuestion();
    });
    btnCheck.addEventListener("click", checkAnswer);

    // === Start ===
    showQuestion();
  </script>
</body>
</html>
